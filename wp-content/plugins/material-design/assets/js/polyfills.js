!function(){var e={909:function(e){"use strict";function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function n(e,t){var r=e._map,n=e._arrayTreeMap,o=e._objectTreeMap;if(r.has(t))return r.get(t);for(var i=Object.keys(t).sort(),u=Array.isArray(t)?n:o,s=0;s<i.length;s++){var c=i[s];if(void 0===(u=u.get(c)))return;var a=t[c];if(void 0===(u=u.get(a)))return}var l=u.get("_ekm_value");return l?(r.delete(l[0]),l[0]=t,u.set("_ekm_value",l),r.set(t,l),l):void 0}var o=function(){function e(t){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.clear(),t instanceof e){var r=[];t.forEach((function(e,t){r.push([t,e])})),t=r}if(null!=t)for(var n=0;n<t.length;n++)this.set(t[n][0],t[n][1])}var o,i,u;return o=e,(i=[{key:"set",value:function(r,n){if(null===r||"object"!==t(r))return this._map.set(r,n),this;for(var o=Object.keys(r).sort(),i=[r,n],u=Array.isArray(r)?this._arrayTreeMap:this._objectTreeMap,s=0;s<o.length;s++){var c=o[s];u.has(c)||u.set(c,new e),u=u.get(c);var a=r[c];u.has(a)||u.set(a,new e),u=u.get(a)}var l=u.get("_ekm_value");return l&&this._map.delete(l[0]),u.set("_ekm_value",i),this._map.set(r,i),this}},{key:"get",value:function(e){if(null===e||"object"!==t(e))return this._map.get(e);var r=n(this,e);return r?r[1]:void 0}},{key:"has",value:function(e){return null===e||"object"!==t(e)?this._map.has(e):void 0!==n(this,e)}},{key:"delete",value:function(e){return!!this.has(e)&&(this.set(e,void 0),!0)}},{key:"forEach",value:function(e){var r=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this;this._map.forEach((function(o,i){null!==i&&"object"===t(i)&&(o=o[1]),e.call(n,o,i,r)}))}},{key:"clear",value:function(){this._map=new Map,this._arrayTreeMap=new Map,this._objectTreeMap=new Map}},{key:"size",get:function(){return this._map.size}}])&&r(o.prototype,i),u&&r(o,u),e}();e.exports=o},884:function(e){e.exports=function(e){var t,r=Object.keys(e);return t=function(){var e,t,n;for(e="return {",t=0;t<r.length;t++)e+=(n=JSON.stringify(r[t]))+":r["+n+"](s["+n+"],a),";return e+="}",new Function("r,s,a",e)}(),function(n,o){var i,u,s;if(void 0===n)return t(e,{},o);for(i=t(e,n,o),u=r.length;u--;)if(n[s=r[u]]!==i[s])return i;return n}}}},t={};function r(n){var o=t[n];if(void 0!==o)return o.exports;var i=t[n]={exports:{}};return e[n](i,i.exports,r),i.exports}r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,{a:t}),t},r.d=function(e,t){for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},function(){"use strict";var e={};r.r(e),r.d(e,{getCachedResolvers:function(){return B},getIsResolving:function(){return C},hasFinishedResolution:function(){return V},hasStartedResolution:function(){return D},isResolving:function(){return G}});var t={};r.r(t),r.d(t,{finishResolution:function(){return K},finishResolutions:function(){return q},invalidateResolution:function(){return X},invalidateResolutionForStore:function(){return Y},invalidateResolutionForStoreSelector:function(){return z},startResolution:function(){return H},startResolutions:function(){return W}});var n={};r.r(n),r.d(n,{getFormatType:function(){return ye},getFormatTypeForBareElement:function(){return me},getFormatTypeForClassName:function(){return Se},getFormatTypes:function(){return ge}});var o={};r.r(o),r.d(o,{addFormatTypes:function(){return we},removeFormatTypes:function(){return be}});var i=window.React;function u(e,t){var r=(0,i.useState)((function(){return{inputs:t,result:e()}}))[0],n=(0,i.useRef)(!0),o=(0,i.useRef)(r),u=n.current||Boolean(t&&o.current.inputs&&function(e,t){if(e.length!==t.length)return!1;for(var r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}(t,o.current.inputs))?o.current:{inputs:t,result:e()};return(0,i.useEffect)((function(){n.current=!1,o.current=u}),[u]),u.result}var s=window.wp.priorityQueue,c=window.wp.element,a=window.wp.isShallowEqual,l=r.n(a),f=window.wp.compose,p=window.lodash;function d(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function h(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function v(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?h(Object(r),!0).forEach((function(t){d(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):h(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function g(e){return"Minified Redux error #"+e+"; visit https://redux.js.org/Errors?code="+e+" for the full message or use the non-minified dev environment for full errors. "}var y="function"==typeof Symbol&&Symbol.observable||"@@observable",m=function(){return Math.random().toString(36).substring(7).split("").join(".")},S={INIT:"@@redux/INIT"+m(),REPLACE:"@@redux/REPLACE"+m(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+m()}};function w(e){if("object"!=typeof e||null===e)return!1;for(var t=e;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function b(e,t,r){var n;if("function"==typeof t&&"function"==typeof r||"function"==typeof r&&"function"==typeof arguments[3])throw new Error(g(0));if("function"==typeof t&&void 0===r&&(r=t,t=void 0),void 0!==r){if("function"!=typeof r)throw new Error(g(1));return r(b)(e,t)}if("function"!=typeof e)throw new Error(g(2));var o=e,i=t,u=[],s=u,c=!1;function a(){s===u&&(s=u.slice())}function l(){if(c)throw new Error(g(3));return i}function f(e){if("function"!=typeof e)throw new Error(g(4));if(c)throw new Error(g(5));var t=!0;return a(),s.push(e),function(){if(t){if(c)throw new Error(g(6));t=!1,a();var r=s.indexOf(e);s.splice(r,1),u=null}}}function p(e){if(!w(e))throw new Error(g(7));if(void 0===e.type)throw new Error(g(8));if(c)throw new Error(g(9));try{c=!0,i=o(i,e)}finally{c=!1}for(var t=u=s,r=0;r<t.length;r++){(0,t[r])()}return e}function d(e){if("function"!=typeof e)throw new Error(g(10));o=e,p({type:S.REPLACE})}function h(){var e,t=f;return(e={subscribe:function(e){if("object"!=typeof e||null===e)throw new Error(g(11));function r(){e.next&&e.next(l())}return r(),{unsubscribe:t(r)}}})[y]=function(){return this},e}return p({type:S.INIT}),(n={dispatch:p,subscribe:f,getState:l,replaceReducer:d})[y]=h,n}function O(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return 0===t.length?function(e){return e}:1===t.length?t[0]:t.reduce((function(e,t){return function(){return e(t.apply(void 0,arguments))}}))}function _(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return function(e){return function(){var r=e.apply(void 0,arguments),n=function(){throw new Error(g(15))},o={getState:r.getState,dispatch:function(){return n.apply(void 0,arguments)}},i=t.map((function(e){return e(o)}));return n=O.apply(void 0,i)(r.dispatch),v(v({},r),{},{dispatch:n})}}}var R=r(884),T=r.n(R),E=r(909),I=r.n(E),N=window.wp.reduxRoutine,A=r.n(N);function j(e){return e.isRegistryControl=!0,e}const L="@@data/SELECT";const x={[L]:j(e=>t=>{let{storeKey:r,selectorName:n,args:o}=t;return e.select(r)[n](...o)}),"@@data/RESOLVE_SELECT":j(e=>t=>{let{storeKey:r,selectorName:n,args:o}=t;const i=e.select(r)[n].hasResolver?"resolveSelect":"select";return e[i](r)[n](...o)}),"@@data/DISPATCH":j(e=>t=>{let{storeKey:r,actionName:n,args:o}=t;return e.dispatch(r)[n](...o)})};var F=()=>e=>t=>{return!(r=t)||"object"!=typeof r&&"function"!=typeof r||"function"!=typeof r.then?e(t):t.then(t=>{if(t)return e(t)});var r};var P=(e,t)=>()=>r=>n=>{const o=e.select("core/data").getCachedResolvers(t);return Object.entries(o).forEach(r=>{let[o,i]=r;const u=(0,p.get)(e.stores,[t,"resolvers",o]);u&&u.shouldInvalidate&&i.forEach((r,i)=>{!1===r&&u.shouldInvalidate(n,...i)&&e.dispatch("core/data").invalidateResolution(t,o,i)})}),r(n)};const k=(U="selectorName",e=>function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1?arguments[1]:void 0;const n=r[U];if(void 0===n)return t;const o=e(t[n],r);return o===t[n]?t:{...t,[n]:o}})((function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new(I()),t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"START_RESOLUTION":case"FINISH_RESOLUTION":{const r="START_RESOLUTION"===t.type,n=new(I())(e);return n.set(t.args,r),n}case"START_RESOLUTIONS":case"FINISH_RESOLUTIONS":{const r="START_RESOLUTIONS"===t.type,n=new(I())(e);for(const e of t.args)n.set(e,r);return n}case"INVALIDATE_RESOLUTION":{const r=new(I())(e);return r.delete(t.args),r}}return e}));var U;var M=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"INVALIDATE_RESOLUTION_FOR_STORE":return{};case"INVALIDATE_RESOLUTION_FOR_STORE_SELECTOR":return(0,p.has)(e,[t.selectorName])?(0,p.omit)(e,[t.selectorName]):e;case"START_RESOLUTION":case"FINISH_RESOLUTION":case"START_RESOLUTIONS":case"FINISH_RESOLUTIONS":case"INVALIDATE_RESOLUTION":return k(e,t)}return e};function C(e,t,r){const n=(0,p.get)(e,[t]);if(n)return n.get(r)}function D(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return void 0!==C(e,t,r)}function V(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return!1===C(e,t,r)}function G(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return!0===C(e,t,r)}function B(e){return e}function H(e,t){return{type:"START_RESOLUTION",selectorName:e,args:t}}function K(e,t){return{type:"FINISH_RESOLUTION",selectorName:e,args:t}}function W(e,t){return{type:"START_RESOLUTIONS",selectorName:e,args:t}}function q(e,t){return{type:"FINISH_RESOLUTIONS",selectorName:e,args:t}}function X(e,t){return{type:"INVALIDATE_RESOLUTION",selectorName:e,args:t}}function Y(){return{type:"INVALIDATE_RESOLUTION_FOR_STORE"}}function z(e){return{type:"INVALIDATE_RESOLUTION_FOR_STORE_SELECTOR",selectorName:e}}const Q=e=>{const t=[...e];for(let e=t.length-1;e>=0;e--)void 0===t[e]&&t.splice(e,1);return t};function $(r,n){return{name:r,instantiate:o=>{const i=n.reducer,u=function(e,t,r,n){const o={...t.controls,...x},i=(0,p.mapValues)(o,e=>e.isRegistryControl?e(r):e),u=[P(r,e),F,A()(i)];t.__experimentalUseThunks&&u.push((s=n,()=>e=>t=>"function"==typeof t?t(s):e(t)));var s;const c=[_(...u)];"undefined"!=typeof window&&window.__REDUX_DEVTOOLS_EXTENSION__&&c.push(window.__REDUX_DEVTOOLS_EXTENSION__({name:e,instanceId:e}));const{reducer:a,initialState:l}=t;return b(T()({metadata:M,root:a}),{root:l},(0,p.flowRight)(c))}(r,n,o,{registry:o,get dispatch(){return Object.assign(e=>u.dispatch(e),h())},get select(){return Object.assign(e=>e(u.__unstableOriginalGetState()),d())},get resolveSelect(){return v()}}),s=function(){const e={};return{isRunning:(t,r)=>e[t]&&e[t].get(Q(r)),clear(t,r){e[t]&&e[t].delete(Q(r))},markAsRunning(t,r){e[t]||(e[t]=new(I())),e[t].set(Q(r),!0)}}}();let c;const a=function(e,t){return(0,p.mapValues)(e,e=>function(){return Promise.resolve(t.dispatch(e(...arguments)))})}({...t,...n.actions},u);let l=function(e,t){return(0,p.mapValues)(e,e=>{const r=function(){const r=arguments.length,n=new Array(r+1);n[0]=t.__unstableOriginalGetState();for(let e=0;e<r;e++)n[e+1]=arguments[e];return e(...n)};return r.hasResolver=!1,r})}({...(0,p.mapValues)(e,e=>function(t){for(var r=arguments.length,n=new Array(r>1?r-1:0),o=1;o<r;o++)n[o-1]=arguments[o];return e(t.metadata,...n)}),...(0,p.mapValues)(n.selectors,e=>(e.isRegistrySelector&&(e.registry=o),function(t){for(var r=arguments.length,n=new Array(r>1?r-1:0),o=1;o<r;o++)n[o-1]=arguments[o];return e(t.root,...n)}))},u);if(n.resolvers){const e=function(e,t,r,n){const o=(0,p.mapValues)(e,e=>e.fulfill?e:{...e,fulfill:e});return{resolvers:o,selectors:(0,p.mapValues)(t,(t,i)=>{const u=e[i];if(!u)return t.hasResolver=!1,t;const s=function(){for(var e=arguments.length,s=new Array(e),c=0;c<e;c++)s[c]=arguments[c];async function a(){const e=r.getState();if(n.isRunning(i,s)||"function"==typeof u.isFulfilled&&u.isFulfilled(e,...s))return;const{metadata:t}=r.__unstableOriginalGetState();D(t,i,s)||(n.markAsRunning(i,s),setTimeout(async()=>{n.clear(i,s),r.dispatch(H(i,s)),await J(r,o,i,...s),r.dispatch(K(i,s))}))}return a(...s),t(...s)};return s.hasResolver=!0,s})}}(n.resolvers,l,u,s);c=e.resolvers,l=e.selectors}const f=function(e,t){return(0,p.mapValues)((0,p.omit)(e,["getIsResolving","hasStartedResolution","hasFinishedResolution","isResolving","getCachedResolvers"]),(r,n)=>function(){for(var o=arguments.length,i=new Array(o),u=0;u<o;u++)i[u]=arguments[u];return new Promise(o=>{const u=()=>e.hasFinishedResolution(n,i),s=()=>r.apply(null,i),c=s();if(u())return o(c);const a=t.subscribe(()=>{u()&&(a(),o(s()))})})})}(l,u),d=()=>l,h=()=>a,v=()=>f;u.__unstableOriginalGetState=u.getState,u.getState=()=>u.__unstableOriginalGetState().root;const g=u&&(e=>{let t=u.__unstableOriginalGetState();return u.subscribe(()=>{const r=u.__unstableOriginalGetState(),n=r!==t;t=r,n&&e()})});return{reducer:i,store:u,actions:a,selectors:l,resolvers:c,getSelectors:d,getResolveSelectors:v,getActions:h,subscribe:g}}}}async function J(e,t,r){const n=(0,p.get)(t,[r]);if(!n)return;for(var o=arguments.length,i=new Array(o>3?o-3:0),u=3;u<o;u++)i[u-3]=arguments[u];const s=n.fulfill(...i);s&&await e.dispatch(s)}var Z=function(e){const t=t=>function(r){for(var n=arguments.length,o=new Array(n>1?n-1:0),i=1;i<n;i++)o[i-1]=arguments[i];return e.select(r)[t](...o)},r=t=>function(r){for(var n=arguments.length,o=new Array(n>1?n-1:0),i=1;i<n;i++)o[i-1]=arguments[i];return e.dispatch(r)[t](...o)};return{getSelectors:()=>["getIsResolving","hasStartedResolution","hasFinishedResolution","isResolving","getCachedResolvers"].reduce((e,r)=>({...e,[r]:t(r)}),{}),getActions:()=>["startResolution","finishResolution","invalidateResolution","invalidateResolutionForStore","invalidateResolutionForStoreSelector"].reduce((e,t)=>({...e,[t]:r(t)}),{}),subscribe:()=>()=>{}}};function ee(){let e=!1,t=!1;const r=new Set,n=()=>Array.from(r).forEach(e=>e());return{get isPaused(){return e},subscribe:e=>(r.add(e),()=>r.delete(e)),pause(){e=!0},resume(){e=!1,t&&(t=!1,n())},emit(){e?t=!0:n()}}}var te=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const r={},n=ee(),o=new Set;function i(){n.emit()}const u=e=>n.subscribe(e);function s(e){const n=(0,p.isObject)(e)?e.name:e;o.add(n);const i=r[n];return i?i.getSelectors():t&&t.select(n)}function c(e,t){o.clear();const r=e.call(this);return t.current=Array.from(o),r}function a(e){const n=(0,p.isObject)(e)?e.name:e;o.add(n);const i=r[n];return i?i.getResolveSelectors():t&&t.resolveSelect(n)}function l(e){const n=(0,p.isObject)(e)?e.name:e,o=r[n];return o?o.getActions():t&&t.dispatch(n)}function f(e){return(0,p.mapValues)(e,(e,t)=>"function"!=typeof e?e:function(){return y[t].apply(null,arguments)})}function d(e,t){if("function"!=typeof t.getSelectors)throw new TypeError("config.getSelectors must be a function");if("function"!=typeof t.getActions)throw new TypeError("config.getActions must be a function");if("function"!=typeof t.subscribe)throw new TypeError("config.subscribe must be a function");t.emitter=ee();const n=t.subscribe;t.subscribe=e=>{const r=t.emitter.subscribe(e),o=n(()=>{t.emitter.isPaused?t.emitter.emit():e()});return()=>{o&&o(),r()}},r[e]=t,t.subscribe(i)}function h(e){d(e.name,e.instantiate(y))}function v(e,n){return e in r?r[e].subscribe(n):t?t.__experimentalSubscribeStore(e,n):u(n)}function g(e){n.pause(),(0,p.forEach)(r,e=>e.emitter.pause()),e(),n.resume(),(0,p.forEach)(r,e=>e.emitter.resume())}let y={batch:g,registerGenericStore:d,stores:r,namespaces:r,subscribe:u,select:s,resolveSelect:a,dispatch:l,use:m,register:h,__experimentalMarkListeningStores:c,__experimentalSubscribeStore:v};function m(e,t){return y={...y,...e(y,t)},y}return y.registerStore=(e,t)=>{if(!t.reducer)throw new TypeError("Must specify store reducer");const r=$(e,t).instantiate(y);return d(e,r),r.store},d("core/data",Z(y)),Object.entries(e).forEach(e=>{let[t,r]=e;return y.registerStore(t,r)}),t&&t.subscribe(i),f(y)}();const re=(0,c.createContext)(te),{Consumer:ne,Provider:oe}=re;const ie=(0,c.createContext)(!1),{Consumer:ue,Provider:se}=ie;const ce=(0,s.createQueue)();te.select,te.resolveSelect,te.dispatch,te.subscribe,te.registerGenericStore,te.registerStore,te.use;const ae=te.register;var le,fe,pe=T()({formatTypes:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_FORMAT_TYPES":return{...e,...(0,p.keyBy)(t.formatTypes,"name")};case"REMOVE_FORMAT_TYPES":return(0,p.omit)(e,t.names)}return e}});function de(e){return[e]}function he(){var e={clear:function(){e.head=null}};return e}function ve(e,t,r){var n;if(e.length!==t.length)return!1;for(n=r;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}le={},fe="undefined"!=typeof WeakMap;const ge=function(e,t){var r,n;function o(){r=fe?new WeakMap:he()}function i(){var r,o,i,u,s,c=arguments.length;for(u=new Array(c),i=0;i<c;i++)u[i]=arguments[i];for(s=t.apply(null,u),(r=n(s)).isUniqueByDependants||(r.lastDependants&&!ve(s,r.lastDependants,0)&&r.clear(),r.lastDependants=s),o=r.head;o;){if(ve(o.args,u,1))return o!==r.head&&(o.prev.next=o.next,o.next&&(o.next.prev=o.prev),o.next=r.head,o.prev=null,r.head.prev=o,r.head=o),o.val;o=o.next}return o={val:e.apply(null,u)},u[0]=null,o.args=u,r.head&&(r.head.prev=o,o.next=r.head),r.head=o,o.val}return t||(t=de),n=fe?function(e){var t,n,o,i,u,s=r,c=!0;for(t=0;t<e.length;t++){if(n=e[t],!(u=n)||"object"!=typeof u){c=!1;break}s.has(n)?s=s.get(n):(o=new WeakMap,s.set(n,o),s=o)}return s.has(le)||((i=he()).isUniqueByDependants=c,s.set(le,i)),s.get(le)}:function(){return r},i.getDependants=t,i.clear=o,o(),i}(e=>Object.values(e.formatTypes),e=>[e.formatTypes]);function ye(e,t){return e.formatTypes[t]}function me(e,t){return(0,p.find)(ge(e),e=>{let{className:r,tagName:n}=e;return null===r&&t===n})}function Se(e,t){return(0,p.find)(ge(e),e=>{let{className:r}=e;return null!==r&&` ${t} `.indexOf(` ${r} `)>=0})}function we(e){return{type:"ADD_FORMAT_TYPES",formatTypes:(0,p.castArray)(e)}}function be(e){return{type:"REMOVE_FORMAT_TYPES",names:(0,p.castArray)(e)}}ae($("core/rich-text",{reducer:pe,selectors:n,actions:o})),window.wp&&window.wp.richText&&!window.wp.richText.__experimentalRichText&&(window.wp.richText.__experimentalRichText=function(){}),window.wp&&window.wp.data&&!window.wp.data.useSelect&&(window.wp.data.useSelect=function(e,t){const r="function"!=typeof e;r&&(t=[]);const n=(0,c.useCallback)(e,t),o=(0,c.useContext)(re),i=(0,c.useContext)(ie),s=u(()=>({queue:!0}),[o]),[,a]=(0,c.useReducer)(e=>e+1,0),p=(0,c.useRef)(),d=(0,c.useRef)(i),h=(0,c.useRef)(),v=(0,c.useRef)(),g=(0,c.useRef)(),y=(0,c.useRef)([]),m=(0,c.useCallback)(e=>o.__experimentalMarkListeningStores(e,y),[o]),S=(0,c.useMemo)(()=>({}),t||[]);let w;if(!r)try{w=p.current!==n||v.current?m(()=>n(o.select,o)):h.current}catch(e){let t="An error occurred while running 'mapSelect': "+e.message;v.current&&(t+="\nThe error may be correlated with this previous error:\n",t+=v.current.stack+"\n\n",t+="Original stack trace:"),console.error(t),w=h.current}return(0,f.useIsomorphicLayoutEffect)(()=>{r||(p.current=n,h.current=w,v.current=void 0,g.current=!0,d.current!==i&&(d.current=i,ce.flush(s)))}),(0,f.useIsomorphicLayoutEffect)(()=>{if(r)return;const e=()=>{if(g.current){try{const e=m(()=>p.current(o.select,o));if(l()(h.current,e))return;h.current=e}catch(e){v.current=e}a()}};d.current?ce.add(s,e):e();const t=()=>{d.current?ce.add(s,e):e()},n=y.current.map(e=>o.__experimentalSubscribeStore(e,t));return()=>{g.current=!1,n.forEach(e=>null==e?void 0:e()),ce.flush(s)}},[o,m,S,r]),r?o.select(e):w})}()}();